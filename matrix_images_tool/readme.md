# 图片矩阵生成器

### 简介
+ 基于opencv实现将若干图片生成另外的一张图片，每个图片作为另一个图片的像素

### 环境
+ 编译器vs2019(msvc14 x64)
+ opencv-4.3.0-x64
+ sqlite3-x64

### 原理

1.  读取数据源进行处理并储存到数据库(这里数据源指生成方形缩略图的图片库)
    +   读取"原图"
    +   将"原图"缩放成目标正方形内最大尺寸的矩形，作为"前景图"
    +   将"原图"截取为矩形内中心部位最大的正方形，缩放为目标正方形大小，进行全图中值模糊，作为"背景图"
    +   将"全景图"覆盖到"背景图"的中心位置，作为"缩略图"
    +   计算"缩略图"所有像素的三通道均值
    +   相关信息写入数据库，并保存"缩略图"到指定位置

2.  用缩略图替换原图的每个像素(这里原图指被替换像素的图片)
    +   读取"原图"
    +   依据当前像素的三通道值，与数据库中各图片的对应通道，计算差值的绝对值之和，选取当前差值和最小并且未使用的"缩略图"
    +   替换像素

### 说明
+ 生成大图的相似度取决于你略缩图图库的丰富度

###### @xMushroom